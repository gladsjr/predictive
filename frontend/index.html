<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercado de Predi√ß√£o Descentralizado</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîÆ Mercado de Predi√ß√£o Descentralizado</h1>
            <div id="wallet-info" class="wallet-info">
                <button id="connectButton" class="btn btn-primary">Conectar MetaMask</button>
                <div id="accountInfo" style="display: none;">
                    <p>Conta: <span id="accountAddress"></span></p>
                    <p>Rede: <span id="networkName"></span></p>
                </div>
            </div>
        </header>

        <!-- Se√ß√£o Owner -->
        <div id="ownerSection" class="section" style="display: none;">
            <h2>‚öôÔ∏è Painel do Owner</h2>
            
            <!-- Criar Predi√ß√£o -->
            <div class="card">
                <h3>Criar Nova Predi√ß√£o</h3>
                <form id="createPredictionForm">
                    <div class="form-group">
                        <label>Nome Curto:</label>
                        <input type="text" id="shortName" required placeholder="Ex: Bitcoin $100k?">
                    </div>
                    <div class="form-group">
                        <label>Descri√ß√£o:</label>
                        <textarea id="description" required placeholder="Descri√ß√£o detalhada da predi√ß√£o"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Data de Apura√ß√£o:</label>
                        <input type="datetime-local" id="settlementDate" required>
                    </div>
                    <div class="form-group">
                        <label>Valor da Aposta (ETH):</label>
                        <input type="number" id="betAmount" step="0.001" required placeholder="0.1">
                    </div>
                    <button type="submit" class="btn btn-success">Criar Predi√ß√£o</button>
                </form>
            </div>

            <!-- Resolver/Deletar Predi√ß√£o -->
            <div id="ownerControls" style="display: none;">
                <div class="card">
                    <h3>Controles da Predi√ß√£o</h3>
                    <div class="button-group">
                        <button id="settleYesButton" class="btn btn-success">Resolver como YES</button>
                        <button id="settleNoButton" class="btn btn-danger">Resolver como NO</button>
                        <button id="deleteButton" class="btn btn-warning">Deletar Predi√ß√£o</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Predi√ß√£o Atual -->
        <div id="predictionSection" class="section" style="display: none;">
            <div class="card">
                <h2>üìä Predi√ß√£o Atual</h2>
                <div id="predictionInfo">
                    <h3 id="predictionName"></h3>
                    <p id="predictionDescription"></p>
                    <p><strong>Data de Apura√ß√£o:</strong> <span id="predictionDate"></span></p>
                    <p><strong>Valor da Aposta:</strong> <span id="predictionBetAmount"></span> ETH</p>
                    <p id="predictionStatus"></p>
                </div>

                <!-- Volumes -->
                <div class="volumes">
                    <h3>üí∞ Volumes de Apostas</h3>
                    <div class="volume-bars">
                        <div class="volume-item">
                            <div class="volume-label">
                                <span class="yes-label">‚úÖ YES</span>
                                <span id="yesVolume" class="volume-value">0 ETH</span>
                                <span id="yesCount" class="bet-count">(0 apostas)</span>
                            </div>
                            <div class="volume-bar">
                                <div id="yesBar" class="volume-fill yes"></div>
                            </div>
                        </div>
                        <div class="volume-item">
                            <div class="volume-label">
                                <span class="no-label">‚ùå NO</span>
                                <span id="noVolume" class="volume-value">0 ETH</span>
                                <span id="noCount" class="bet-count">(0 apostas)</span>
                            </div>
                            <div class="volume-bar">
                                <div id="noBar" class="volume-fill no"></div>
                            </div>
                        </div>
                    </div>
                    <p class="total-pool"><strong>Pool Total:</strong> <span id="totalPool">0</span> ETH</p>
                </div>

                <!-- Fazer Aposta -->
                <div id="bettingSection" style="display: none;">
                    <h3>üé≤ Fazer sua Aposta</h3>
                    <div id="userBetInfo" style="display: none;">
                        <p class="bet-placed">Voc√™ j√° apostou nesta predi√ß√£o: <strong id="userChoice"></strong></p>
                    </div>
                    <div id="betButtons" class="button-group">
                        <button id="betYesButton" class="btn btn-yes">Apostar em YES</button>
                        <button id="betNoButton" class="btn btn-no">Apostar em NO</button>
                    </div>
                </div>

                <!-- Resultado -->
                <div id="resultSection" style="display: none;">
                    <h3>üèÜ Resultado Final</h3>
                    <p id="resultText"></p>
                </div>
            </div>
        </div>

        <!-- Status -->
        <div id="statusMessage" class="status-message"></div>

        <!-- Sem Predi√ß√£o -->
        <div id="noPrediction" class="section" style="display: none;">
            <div class="card empty-state">
                <h2>üò¥ Nenhuma Predi√ß√£o Ativa</h2>
                <p>N√£o h√° predi√ß√µes ativas no momento. Aguarde o owner criar uma nova predi√ß√£o!</p>
            </div>
        </div>
    </div>

    <footer>
        <p>Desenvolvido com ‚ù§Ô∏è usando Hardhat e Ethereum</p>
        <p>Contrato: <span id="contractAddress"></span></p>
    </footer>

    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
